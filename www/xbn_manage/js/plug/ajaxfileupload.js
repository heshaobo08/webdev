jQuery.extend({createUploadIframe:function(a,b){var c="jUploadFrame"+a,d='<iframe id="'+c+'" name="'+c+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject){var e=(navigator.appName,navigator.appVersion),f=e.split(";"),g=f[1].replace(/[ ]/g,"");if("MSIE9.0"==g||"MSIE10.0"==g){var h=document.createElement("iframe");h.id=c,h.name=c}else if("MSIE6.0"==g||"MSIE7.0"==g||"MSIE8.0"==g){var h=document.createElement('<iframe id="'+c+'" name="'+c+'" />');"boolean"==typeof b?h.src="javascript:false":"string"==typeof b&&(h.src=b)}}return d+=" />",jQuery(d).appendTo(document.body),jQuery("#"+c).get(0)},createUploadForm:function(a,b,c,d){var e="jUploadForm"+a,f="jUploadFile"+a,g=jQuery('<form  action="" method="POST" name="'+e+'" id="'+e+'" enctype="multipart/form-data"></form>');if(c)for(var h in c)jQuery('<input type="hidden" name="'+h+'" value="'+c[h]+'" />').appendTo(g);var i;i=null==d?jQuery("#"+b):d;var j=jQuery(i).clone();return jQuery(i).attr("id",f),jQuery(i).before(j),jQuery(i).appendTo(g),jQuery(g).css("position","absolute"),jQuery(g).css("top","-1200px"),jQuery(g).css("left","-1200px"),jQuery(g).appendTo("body"),g},ajaxFileUpload:function(a){a=jQuery.extend({},jQuery.ajaxSettings,a);var b=(new Date).getTime(),c=jQuery.createUploadForm(b,a.fileElementId,"undefined"==typeof a.data?!1:a.data,a.fileElement),d=(jQuery.createUploadIframe(b,a.secureuri),"jUploadFrame"+b),e="jUploadForm"+b;a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var f=!1,g={};a.global&&jQuery.event.trigger("ajaxSend",[g,a]);var h=function(b){var e=document.getElementById(d);try{e.contentWindow?(g.responseText=e.contentWindow.document.body?e.contentWindow.document.body.innerHTML:null,g.responseXML=e.contentWindow.document.XMLDocument?e.contentWindow.document.XMLDocument:e.contentWindow.document):e.contentDocument&&(g.responseText=e.contentDocument.document.body?e.contentDocument.document.body.innerHTML:null,g.responseXML=e.contentDocument.document.XMLDocument?e.contentDocument.document.XMLDocument:e.contentDocument.document)}catch(h){jQuery.handleError(a,g,null,h)}if(g||"timeout"==b){f=!0;var i;try{if(i="timeout"!=b?"success":"error","error"!=i){var j=jQuery.uploadHttpData(g,a.dataType);a.success&&a.success(j,i),a.global&&jQuery.event.trigger("ajaxSuccess",[g,a])}else jQuery.handleError(a,g,i)}catch(h){i="error",jQuery.handleError(a,g,i,h)}a.global&&jQuery.event.trigger("ajaxComplete",[g,a]),a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),a.complete&&a.complete(g,i),jQuery(e).unbind(),setTimeout(function(){try{jQuery(e).remove(),jQuery(c).remove()}catch(b){jQuery.handleError(a,g,null,b)}},100),g=null}};a.timeout>0&&setTimeout(function(){f||h("timeout")},a.timeout);try{var c=jQuery("#"+e);jQuery(c).attr("action",a.url),jQuery(c).attr("method","POST"),jQuery(c).attr("target",d),c.encoding?jQuery(c).attr("encoding","multipart/form-data"):jQuery(c).attr("enctype","multipart/form-data"),jQuery(c).submit()}catch(i){jQuery.handleError(a,g,null,i)}return jQuery("#"+d).load(h),{abort:function(){try{jQuery("#"+d).remove(),jQuery(c).remove()}catch(a){}}}},uploadHttpData:function(r,type){var data=!type;data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&(data=r.responseText);var start=data.indexOf(">");if(-1!=start){var end=data.indexOf("<",start+1);-1!=end&&(data=data.substring(start+1,end))}return eval("data = "+decodeURIComponent(data)),"html"==type&&jQuery("<div>").html(data).evalScripts(),data},handleError:function(a,b,c,d){a.error&&a.error(b,c,d),a.global&&jQuery.event.trigger("ajaxError",[b,a,d])}});